---
import BaseLayout from "../layouts/BaseLayout.astro";
import fs from "node:fs";
import path from "node:path";
import PhotoCarousel from "../components/about_section/PhotoCarousel";

const title = "Filmmaking";
const playlistUrl = "https://hi.switchy.io/q3Ng";
const screenplayUrl = "/among-monsters-screenplay.pdf";

const filmmakingPicsDir = path.join(process.cwd(), "public", "Filmmaking Page pics");
let filmmakingFiles = [];
try {
  filmmakingFiles = fs
    .readdirSync(filmmakingPicsDir)
    .filter((file) => /\.(png|jpe?g|webp|gif|avif)$/i.test(file))
    .sort((a, b) => a.localeCompare(b));
} catch (error) {
  filmmakingFiles = [];
}

const filmmakingPhotos = filmmakingFiles.map((file) => {
  const encoded = encodeURIComponent(file);
  const src = `/Filmmaking%20Page%20pics/${encoded}`;
  const alt = file.replace(/\.[^/.]+$/, "").replace(/[-_]+/g, " ");
  return {
    src,
    alt,
    context: `Filmmaking still: ${alt}`,
    tag: "Filmmaking",
  };
});

const galleryDir = path.join(process.cwd(), "public", "Photo Gallery");
let galleryFiles = [];
try {
  galleryFiles = fs
    .readdirSync(galleryDir)
    .filter((file) => /\.(png|jpe?g|webp|gif|avif)$/i.test(file))
    .sort((a, b) => a.localeCompare(b));
} catch (error) {
  galleryFiles = [];
}

const galleryItems = galleryFiles.map((file) => {
  const encoded = encodeURIComponent(file);
  const src = `/Photo%20Gallery/${encoded}`;
  const alt = file.replace(/\.[^/.]+$/, "").replace(/[-_]+/g, " ");
  return { src, alt };
});

const crewPhoto = (filename) => ({
  src: `/Crew%20Photos/${encodeURIComponent(filename)}`,
  alt: filename.replace(/\.[^/.]+$/, ""),
});

const instagramUrl = (handle) =>
  handle ? `https://instagram.com/${handle.replace(/^@/, "")}` : "";

const roles = [
  {
    title: "Director",
    items: ["Extraordinary Lives (upcoming)", "Among Monsters (2026)", "Tiger Man (2022)"],
    icon: "fas fa-clapperboard",
    gridClass: "lg:col-start-1 lg:col-span-2",
  },
  {
    title: "Writer",
    items: [
      "Extraordinary Lives (upcoming)",
      "Pupa (upcoming)",
      "Among Monsters (2026)",
      "Tigerman (2022)",
    ],
    icon: "fas fa-pen-nib",
    gridClass: "lg:col-start-3 lg:col-span-2",
  },
  {
    title: "Editor",
    items: ["Among Monsters (2026)", "Solistice (2025)", "Swecha (2024)", "Tigerman (2022)"],
    icon: "fas fa-scissors",
    gridClass: "lg:col-start-5 lg:col-span-2",
  },
  {
    title: "Cinematographer",
    items: ["Among Monsters (2026)", "Strangers (2019)"],
    icon: "fas fa-video",
    gridClass: "lg:col-start-2 lg:col-span-2",
  },
  {
    title: "Music Composer",
    items: ["Among Monsters (2026)", "Strangers (2019)"],
    icon: "fas fa-music",
    gridClass: "lg:col-start-4 lg:col-span-2",
  },
];

const pickGalleryImage = (index) => {
  if (!galleryItems.length) {
    return { src: "/paper.png", alt: "Placeholder image" };
  }
  return galleryItems[index % galleryItems.length];
};

const keyCreators = [
  {
    role: "Director / Writer",
    name: "Sampreeth Sharma",
    quote: "hahaha",
    image: crewPhoto("Sampreeth.JPG"),
    instagram: "@sampreeth.sharma",
  },
  {
    role: "Director of Photography",
    name: "Isaac Chipe",
    quote: "hahahahahahahaha",
    image: crewPhoto("Isaac.jpg"),
    instagram: "@isaacchipedop",
  },
  {
    role: "Co-Writer",
    name: "Akash Munji",
    quote: "hahahahaha",
    image: crewPhoto("Akash.jpg"),
    instagram: "@akumunji",
  },
];

const mainCast = [
  {
    name: "Sam Velletri",
    role: "John Reese / Harold Finch",
    quote: "Quote coming soon.",
    image: crewPhoto("Sam Velletri.jpg"),
    instagram: "@samvelletri",
  },
  {
    name: "Matt Ehrmann",
    role: "",
    quote: "Quote coming soon.",
    image: pickGalleryImage(4),
    instagram: "@mattspaceship",
  },
  {
    name: "Kendall Hobson",
    role: "Carl",
    quote: "Quote coming soon.",
    image: crewPhoto("Kendall.jpeg"),
    instagram: "@kenny.flair",
  },
  {
    name: "Lazaro Clapp",
    role: "",
    quote: "Quote coming soon.",
    image: pickGalleryImage(13),
    imageStyle: "object-position: 28% center;",
    instagram: "@lazaroclapp",
  },
  {
    name: "Alex Murray",
    role: "Sam",
    quote: "Quote coming soon.",
    image: crewPhoto("Alex.jpeg"),
    instagram: "@cooldudemurray",
  },
  {
    name: "Evan Beskin",
    role: "Agent David",
    quote: "Quote coming soon.",
    image: pickGalleryImage(8),
    imageStyle: "object-position: 65% 60%; transform: scale(1.12);",
    instagram: "",
  },
];

const supportingCast = [
  {
    name: "Tom Velletri",
    role: "Faith",
    image: crewPhoto("Tom Velletri.jpeg"),
    imageStyle: "object-position: 30% center; transform: scale(1.05);",
    instagram: "@tomvelletri",
  },
  {
    name: "Luke Johnson",
    role: "Marcus",
    image: crewPhoto("Luke.jpeg"),
    instagram: "@lukeabjohnson",
  },
  {
    name: "Jordyn Andrea",
    role: "Sarah",
    image: crewPhoto("Jordyn.jpeg"),
    imageStyle: "transform: scale(1.05);",
    instagram: "@jordyn.andrea",
  },
  {
    name: "Dhruv Sridhar",
    role: "Unnamed Drug Dealer",
    image: pickGalleryImage(6),
    instagram: "@dhruv_sridhar",
  },
  {
    name: "Riyaan Jiwani",
    role: "Max",
    image: crewPhoto("Max.jpeg"),
    instagram: "@riyaan.jiwani",
  },
  {
    name: "Asli Mumtas",
    role: "Grace",
    image: pickGalleryImage(9),
    imageStyle: "object-position: 70% center;",
    instagram: "@asliimumtas",
  },
  {
    name: "Dylan Redford",
    role: "Unnamed FBI Agent",
    image: pickGalleryImage(15),
    instagram: "@dylanredford",
  },
];

const musicCredits = [
  {
    name: "Sai Charan Thota",
    role: "PRO-JECT 53",
    image: pickGalleryImage(16),
    instagram: "@charan_af",
  },
  {
    name: "Eknath Sravanam",
    role: "PRO-JECT 53",
    image: pickGalleryImage(17),
    instagram: "@eknath_sravanam",
  },
];

const filmTimeline = [
  {
    title: "Director, Writer, Editor, Color Grading, Music",
    date: "Mar 2024 - Present",
    project: "Among Monsters — Independent Feature Film",
    projectLink: "#among-monsters",
  },
  {
    title: "Editor",
    date: "Jul 2025 - Aug 2025",
    project: "Solistice — Documentary",
  },
  {
    title: "AD",
    date: "Dec 2024 - Jun 2025",
    project: "The blessing — Independent Feature Film",
  },
  {
    title: "Editor, Color Grading",
    date: "Mar 2024",
    project: "Swecha — Short Film",
  },
  {
    title: "Editor, Color Grading",
    date: "Sep 2023",
    project: "The Other Planner — Micro Film",
  },
  {
    title: "Director, Writer, Editor, Color Grader",
    date: "2022",
    project: "Tigerman — Micro Film",
  },
  {
    title: "Asst. Editor, Color Grading",
    date: "2021",
    project: "Gone forever — Short Film",
  },
  {
    title: "Journey Started",
    date: "2013",
    project: "Many projects before this.",
  },
];
---

<BaseLayout title={title} footerVariant="filmmaking">
  <section class="mt-24 space-y-8 reveal" data-reveal>
    <p class="uppercase tracking-[0.3em] text-xs text-secondary dark:text-dk-secondary">
      Photographer • Writer • Filmmaker • Traveler
    </p>
    <div class="my-8 flex flex-col lg:flex-row gap-10 items-center">
      <div class="flex-[5] flex justify-center w-full">
        <PhotoCarousel photos={filmmakingPhotos} title={false} client:visible />
      </div>
      <blockquote class="flex-1 text-4xl lg:text-6xl xl:text-7xl font-semibold italic text-secondary dark:text-dk-secondary leading-snug lg:-ml-12 text-left">
        “Cinema is how I make truth visible.”
      </blockquote>
    </div>
    <div class="my-16">
      <h2 class="text-3xl font-bold mb-6 text-left">Creative Roles</h2>
      <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 justify-items-center">
        {roles.map((role) => (
          <div
            class={`group bg-primary dark:bg-dk-primary rounded-lg border-2 border-secondary dark:border-dk-secondary p-6 text-center max-w-sm w-full relative overflow-hidden min-h-[180px] flex items-center justify-center transition-transform duration-300 ease-out hover:scale-105 hover:shadow-lg col-span-full sm:col-span-1 ${role.gridClass}`}
          >
            <div class="flex flex-col items-center">
              <i class={`${role.icon} text-3xl lg:text-4xl text-secondary dark:text-dk-secondary mb-3`}></i>
              <h3 class="text-2xl lg:text-3xl font-semibold mb-2">{role.title}</h3>
            </div>
            <div class="absolute inset-0 bg-primary dark:bg-dk-primary opacity-0 group-hover:opacity-95 transition-opacity duration-300 flex items-center justify-center p-4">
              <ul class="text-sm lg:text-base text-text dark:text-dk-text space-y-2 font-semibold">
                {role.items.map((item) => (
                  <li>- {item}</li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </div>
    <div class="my-16 flex flex-col lg:flex-row gap-10 items-start">
      <div class="flex flex-col space-y-4 lg:w-1/2 mx-4">
        <div class="flex items-center gap-4">
          <h2 class="text-2xl font-bold">Timeline</h2>
        </div>
        {filmTimeline.map((item, index) => (
          <div class="flex flex-col space-y-2 relative" key={item.title + item.date}>
            <div class="flex items-center space-x-2">
              <i class="fas fa-film text-2xl text-secondary dark:text-dk-secondary dark:hover:text-dk-accent hover:text-accent z-10"></i>
              <h3 class="text-xl font-semibold">{item.title}</h3>
            </div>
            <div class="relative left-10 w-full">
              <p class="text-xl font-normal">{item.date}</p>
              {item.projectLink ? (
                <a
                  href={item.projectLink}
                  class="text-xl font-normal text-secondary dark:text-dk-secondary hover:text-accent dark:hover:text-dk-accent underline"
                >
                  {item.project}
                </a>
              ) : (
                <p class="text-xl font-normal">{item.project}</p>
              )}
            </div>
            {index !== filmTimeline.length - 1 && (
              <div class="absolute top-3.5 left-[0.655rem] h-full w-1 bg-secondary dark:bg-dk-secondary hover:bg-accent dark:hover:bg-dk-accent -z-10"></div>
            )}
          </div>
        ))}
      </div>
      <blockquote class="flex-1 self-center text-5xl lg:text-6xl xl:text-7xl font-semibold italic text-secondary dark:text-dk-secondary leading-tight text-center">
        “Ordinary<br />lives,<br />Extraordinary<br />stakes”
      </blockquote>
    </div>
  </section>

  <section class="my-16 reveal" data-reveal>
    <h1 class="text-4xl lg:text-6xl font-bold text-center mb-8" id="among-monsters">
      Among Monsters (2026)
    </h1>
    <div class="relative w-full max-w-5xl mx-auto group">
      <img
        src="/among-monsters-poster.jpg"
        alt="Among Monsters poster"
        class="w-full h-auto bg-black"
      />
      <div class="absolute inset-0 bg-black/55 opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
      <div class="absolute inset-0 z-10 flex items-center justify-center px-6 opacity-0 transition-opacity duration-300 group-hover:opacity-100">
        <div class="max-w-3xl text-center space-y-4">
          <p class="text-2xl lg:text-3xl text-white font-semibold">
            Guns &amp; Drugs don&#39;t save people
          </p>
          <p class="text-base lg:text-lg text-white/90">
            Witness the story of a criminal trapped in a coward’s body, driven to seek revenge at all costs.
            Chaos is inevitable. The question is not whether he will break—but how long he can keep going.
          </p>
          <div class="flex flex-wrap justify-center gap-4 mt-6">
            <a
              href={playlistUrl}
              target="_blank"
              rel="noreferrer"
              class="px-6 py-3 border-2 rounded bg-white text-black border-white shadow-[0_6px_0_rgba(0,0,0,0.35)] hover:-translate-y-0.5 hover:shadow-[0_4px_0_rgba(0,0,0,0.35)] transition"
            >
              Watch the Playlist
            </a>
            <a
              href={screenplayUrl}
              target="_blank"
              rel="noreferrer"
              class="px-6 py-3 border-2 rounded text-white border-white hover:bg-white hover:text-black transition"
            >
              Read the Screenplay
            </a>
          </div>
          <p class="mt-4 text-sm text-white/80">
            Premiering Nov 28 in Rochester and coming soon in NYC.
          </p>
        </div>
      </div>
    </div>
  </section>

  


  <section class="my-16 reveal" data-reveal>
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {keyCreators.map((person) => (
        <div class="bg-primary/80 dark:bg-dk-primary/80 rounded-lg border-2 border-secondary dark:border-dk-secondary overflow-hidden max-w-sm w-full mx-auto flex min-h-[200px] transition-transform duration-200 hover:scale-[1.02]">
          <div class="w-2/3 p-4 flex flex-col justify-between">
            <div class="space-y-1 text-left">
              <p class="text-xs uppercase tracking-[0.2em] text-secondary dark:text-dk-secondary">
                {person.role}
              </p>
              <p class="text-2xl font-semibold">{person.name}</p>
              <div class="flex items-center text-secondary dark:text-dk-secondary">
                {person.instagram ? (
                  <a
                    href={instagramUrl(person.instagram)}
                    class="hover:text-accent dark:hover:text-dk-accent"
                    target="_blank"
                    rel="noreferrer"
                    aria-label={`${person.name} Instagram`}
                  >
                    <i class="fab fa-instagram"></i>
                  </a>
                ) : (
                  <span class="opacity-40" aria-hidden="true">
                    <i class="fab fa-instagram"></i>
                  </span>
                )}
              </div>
            </div>
            <p class="text-base text-text dark:text-dk-text italic text-left">“{person.quote}”</p>
          </div>
          <div class="w-1/3">
            <img
              src={person.image.src}
              alt={`${person.name} portrait`}
              class="w-full h-full object-cover"
              loading="lazy"
            />
          </div>
        </div>
      ))}
    </div>

    <div class="mt-8">
      <h3 class="text-2xl font-bold mb-3">Main Cast</h3>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {mainCast.map((member) => (
          <div class="bg-primary/80 dark:bg-dk-primary/80 rounded-lg border-2 border-secondary dark:border-dk-secondary overflow-hidden max-w-sm w-full mx-auto flex min-h-[200px] transition-transform duration-200 hover:scale-[1.02]">
            <div class="w-2/3 p-4 flex flex-col justify-between text-left">
              <div>
                <p class="text-2xl font-semibold">{member.name}</p>
                {member.role && (
                  <p class="text-sm text-secondary dark:text-dk-secondary mt-1">
                    {member.role}
                  </p>
                )}
                <div class="flex items-center text-secondary dark:text-dk-secondary mt-1">
                  {member.instagram ? (
                    <a
                      href={instagramUrl(member.instagram)}
                      class="hover:text-accent dark:hover:text-dk-accent"
                      target="_blank"
                      rel="noreferrer"
                      aria-label={`${member.name} Instagram`}
                    >
                      <i class="fab fa-instagram"></i>
                    </a>
                  ) : (
                    <span class="opacity-40" aria-hidden="true">
                      <i class="fab fa-instagram"></i>
                    </span>
                  )}
                </div>
              </div>
              <p class="text-sm text-text dark:text-dk-text italic">“{member.quote}”</p>
            </div>
            <div class="w-1/3 overflow-hidden">
              <img
                src={member.image.src}
                alt={`${member.name} portrait`}
                class="w-full h-full object-cover"
                style={member.imageStyle}
                loading="lazy"
              />
            </div>
          </div>
        ))}
      </div>
    </div>

    <div class="mt-8">
      <h3 class="text-2xl font-bold mb-3">Supporting Cast</h3>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {supportingCast.map((member) => (
          <div class="bg-primary/80 dark:bg-dk-primary/80 rounded-lg border-2 border-secondary dark:border-dk-secondary overflow-hidden max-w-sm w-full mx-auto flex min-h-[160px] transition-transform duration-200 hover:scale-[1.02]">
            <div class="w-2/3 p-4 flex flex-col justify-center text-left">
              <p class="text-2xl font-semibold">{member.name}</p>
              {member.role && (
                <p class="text-sm text-secondary dark:text-dk-secondary mt-1">
                  {member.role}
                </p>
              )}
              <div class="flex items-center text-secondary dark:text-dk-secondary mt-1">
                {member.instagram ? (
                  <a
                    href={instagramUrl(member.instagram)}
                    class="hover:text-accent dark:hover:text-dk-accent"
                    target="_blank"
                    rel="noreferrer"
                    aria-label={`${member.name} Instagram`}
                  >
                    <i class="fab fa-instagram"></i>
                  </a>
                ) : (
                  <span class="opacity-40" aria-hidden="true">
                    <i class="fab fa-instagram"></i>
                  </span>
                )}
              </div>
            </div>
            <div class="w-1/3">
              <img
                src={member.image.src}
                alt={`${member.name} portrait`}
                class="w-full h-full object-cover"
                style={member.imageStyle}
                loading="lazy"
              />
            </div>
          </div>
        ))}
      </div>
    </div>

    <div class="mt-8">
      <h3 class="text-2xl font-bold mb-3">Music</h3>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {musicCredits.map((member) => (
          <div class="bg-primary/80 dark:bg-dk-primary/80 rounded-lg border-2 border-secondary dark:border-dk-secondary overflow-hidden max-w-sm w-full mx-auto flex min-h-[160px] transition-transform duration-200 hover:scale-[1.02]">
            <div class="w-2/3 p-4 flex flex-col justify-center text-left">
              <p class="text-2xl font-semibold">{member.name}</p>
              {member.role && (
                <p class="text-sm text-secondary dark:text-dk-secondary mt-1">
                  {member.role}
                </p>
              )}
              <div class="flex items-center text-secondary dark:text-dk-secondary mt-1">
                {member.instagram ? (
                  <a
                    href={instagramUrl(member.instagram)}
                    class="hover:text-accent dark:hover:text-dk-accent"
                    target="_blank"
                    rel="noreferrer"
                    aria-label={`${member.name} Instagram`}
                  >
                    <i class="fab fa-instagram"></i>
                  </a>
                ) : (
                  <span class="opacity-40" aria-hidden="true">
                    <i class="fab fa-instagram"></i>
                  </span>
                )}
              </div>
            </div>
            <div class="w-1/3">
              <img
                src={member.image.src}
                alt={`${member.name} portrait`}
                class="w-full h-full object-cover"
                style={member.imageStyle}
                loading="lazy"
              />
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="my-16 reveal" data-reveal>
    <div class="flex items-center justify-center gap-32 text-[7rem] lg:text-[12rem] xl:text-[16rem] text-secondary dark:text-dk-secondary">
      <div class="flex flex-col items-center gap-6 text-center">
        <a href="#among-monsters" aria-label="Among Monsters section">
          <i class="fab fa-youtube"></i>
        </a>
        <p class="text-base lg:text-lg text-text dark:text-dk-text">Among Monsters</p>
      </div>
      <div class="flex flex-col items-center gap-6 text-center">
        <a
          href="https://hi.switchy.io/q3TE"
          aria-label="Photography Page"
          target="_blank"
          rel="noreferrer"
        >
          <i class="fab fa-instagram"></i>
        </a>
        <p class="text-base lg:text-lg text-text dark:text-dk-text">Photography Page</p>
      </div>
      <div class="flex flex-col items-center gap-6 text-center">
        <a href={screenplayUrl} aria-label="Among Monsters screenplay PDF">
          <i class="fas fa-file-pdf"></i>
        </a>
        <p class="text-base lg:text-lg text-text dark:text-dk-text">Among Monsters Screenplay</p>
      </div>
      <div class="flex flex-col items-center gap-6 text-center">
        <a href="https://hi.switchy.io/q94P" aria-label="Among Monsters IMDb" target="_blank" rel="noreferrer">
          <i class="fab fa-imdb"></i>
        </a>
        <p class="text-base lg:text-lg text-text dark:text-dk-text">Among Monsters IMDB</p>
      </div>
    </div>
  </section>

  <section class="my-16 reveal" data-reveal>
    <h2 class="text-3xl font-bold mb-6">Photo Gallery</h2>
    <div class="space-y-6">
      <div class="text-2xl font-bold text-secondary dark:text-dk-secondary">
        Among Monsters (2024-2026):
      </div>
      {galleryItems.length ? (
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {galleryItems.map((item) => (
            <img
              src={item.src}
              alt={item.alt}
              loading="lazy"
              class="w-full h-72 object-cover rounded-lg border-2 border-secondary dark:border-dk-secondary transition-transform duration-200 hover:scale-[1.02]"
            />
          ))}
        </div>
      ) : (
        <p class="text-text dark:text-dk-text">Gallery images coming soon.</p>
      )}
    </div>
  </section>

  
</BaseLayout>
